import{a3 as V,q as A,c as v,B as u,W as F,b5 as ee,aC as $e,r as _,b0 as te,b6 as ze,w as O,T as Q,k as N,Q as z,C as E,ai as oe,a_ as ne,ah as J,b7 as Le,b8 as Oe,z as le,b9 as X,D as He,E as Ae,ba as Ee,a0 as Fe,U as Ne,aM as Re,v as je,bb as ie,J as ae,M as De,N as Ie,P as Me,a1 as Qe}from"./index.f603e444.js";import{Q as Ue}from"./QMenu.b9a8767e.js";import{Q as We}from"./QTooltip.8d1993a0.js";import{a as Y,Q as Ke}from"./QItem.6e91d9d5.js";const Ge=Object.prototype.toString,I=Object.prototype.hasOwnProperty,Je=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function Z(e){if(e!==Object(e)||Je.has(Ge.call(e))===!0||e.constructor&&I.call(e,"constructor")===!1&&I.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||I.call(e,t)}function re(){let e,t,o,n,a,s,r=arguments[0]||{},c=1,m=!1;const y=arguments.length;for(typeof r=="boolean"&&(m=r,r=arguments[1]||{},c=2),Object(r)!==r&&typeof r!="function"&&(r={}),y===c&&(r=this,c--);c<y;c++)if((e=arguments[c])!==null)for(t in e)o=r[t],n=e[t],r!==n&&(m===!0&&n&&((a=Array.isArray(n))||Z(n)===!0)?(a===!0?s=Array.isArray(o)===!0?o:[]:s=Z(o)===!0?o:{},r[t]=re(m,s,n)):n!==void 0&&(r[t]=n));return r}function se(e,t){if(t&&e===t)return null;const o=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return e;const n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,a=n.display;return a==="block"||a==="table"?e:se(e.parentNode)}function M(e,t,o){return!e||e===document.body?!1:o===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function ue(e,t,o){if(o||(o=document.createRange(),o.selectNode(e),o.setStart(e,0)),t.count===0)o.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(o.setEnd(e,t.count),t.count=0);else for(let n=0;t.count!==0&&n<e.childNodes.length;n++)o=ue(e.childNodes[n],t,o);return o}const Xe=/^https?:\/\//;class Ye{constructor(t,o){this.el=t,this.eVm=o,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(M(t.anchorNode,this.el,!0)&&M(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const o=t.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?se(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const o=document.createRange(),n=document.getSelection();t!==null?(o.setStart(t.startContainer,t.startOffset),o.setEnd(t.endContainer,t.endOffset),n.removeAllRanges(),n.addRange(o)):(n.selectAllChildren(this.el),n.collapseToEnd())}savePosition(){let t=-1,o;const n=document.getSelection(),a=this.el.parentNode;if(n.focusNode&&M(n.focusNode,a))for(o=n.focusNode,t=n.focusOffset;o&&o!==a;)o!==this.el&&o.previousSibling?(o=o.previousSibling,t+=o.textContent.length):o=o.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const o=window.getSelection(),n=ue(this.el,{count:this.savedPos});n&&(n.collapse(!1),o.removeAllRanges(),o.addRange(n))}}hasParent(t,o){const n=o?this.parent:this.blockParent;return n!==null?n.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,o,n=this.parent){return n===null?!1:t.includes(n.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(t,o,n.parentNode):!1}is(t,o){if(this.selection===null)return!1;switch(t){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===o;case"fontName":const n=document.queryCommandValue(t);return n===`"${o}"`||n===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const a=document.queryCommandState(t);return o!==void 0?a===o:a}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,o,n=V){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(t,o)&&(t="outdent",o=null),o==="PRE"&&this.is(t,"PRE")&&(o="P");else if(t==="print"){n();const a=window.open();a.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),a.print(),a.close();return}else if(t==="link"){const a=this.getParentAttribute("href");if(a===null){const s=this.selectWord(this.selection),r=s?s.toString():"";if(!r.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Xe.test(r)?r:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(s.getRangeAt(0))}else this.eVm.editLinkUrl.value=a,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),n();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),n();return}document.execCommand(t,!1,o),n()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const o=document.createRange();o.setStart(t.anchorNode,t.anchorOffset),o.setEnd(t.focusNode,t.focusOffset);const n=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const a=t.focusNode,s=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",n[0],"character"),t.modify("move",n[1],"word"),t.extend(a,s),t.modify("extend",n[1],"character"),t.modify("extend",n[0],"word"),t}}var Ze=A({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const o=v(()=>{const n=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>e[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${n.length!==0?" "+n:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>u("div",{class:o.value},F(t.default))}});const Ve=Object.keys(ee),et=e=>Ve.reduce((t,o)=>{const n=e[o];return n!==void 0&&(t[o]=n),t},{});var tt=A({name:"QBtnDropdown",props:{...ee,...$e,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:n}=E(),a=_(e.modelValue),s=_(null),r=te(),c=v(()=>{const f={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r,"aria-label":e.toggleAriaLabel||n.$q.lang.label[a.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(f["aria-disabled"]="true"),f}),m=v(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),y=v(()=>ze(e)),d=v(()=>et(e));O(()=>e.modelValue,f=>{s.value!==null&&s.value[f?"show":"hide"]()}),O(()=>e.split,x);function h(f){a.value=!0,o("beforeShow",f)}function b(f){o("show",f),o("update:modelValue",!0)}function p(f){a.value=!1,o("beforeHide",f)}function S(f){o("hide",f),o("update:modelValue",!1)}function q(f){o("click",f)}function T(f){oe(f),x(),o("click",f)}function B(f){s.value!==null&&s.value.toggle(f)}function w(f){s.value!==null&&s.value.show(f)}function x(f){s.value!==null&&s.value.hide(f)}return Object.assign(n,{show:w,hide:x,toggle:B}),Q(()=>{e.modelValue===!0&&w()}),()=>{const f=[u(N,{class:m.value,name:e.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&f.push(u(Ue,{ref:s,id:r,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:h,onShow:b,onBeforeHide:p,onHide:S},t.default)),e.split===!1?u(z,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...c.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:q},{default:()=>F(t.label,[]).concat(f),loading:t.loading}):u(Ze,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...y.value,glossy:e.glossy,stretch:e.stretch},()=>[u(z,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:T},{default:t.label,loading:t.loading}),u(z,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...c.value,...y.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>f)])}}});function ce(e,t,o){t.handler?t.handler(e,o,o.caret):o.runCmd(t.cmd,t.param)}function U(e){return u("div",{class:"q-editor__toolbar-group"},e)}function de(e,t,o,n=!1){const a=n||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),s=[];if(t.tip&&e.$q.platform.is.desktop){const r=t.key?u("div",[u("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;s.push(u(We,{delay:1e3},()=>[u("div",{innerHTML:t.tip}),r]))}return u(z,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:a?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:a&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(r){o&&o(),ce(r,t,e)}},()=>s)}function ot(e,t){const o=t.list==="only-icons";let n=t.label,a=t.icon!==null?t.icon:void 0,s,r;function c(){y.component.proxy.hide()}if(o)r=t.options.map(d=>{const h=d.type===void 0?e.caret.is(d.cmd,d.param):!1;return h&&(n=d.tip,a=d.icon!==null?d.icon:void 0),de(e,d,c,h)}),s=e.toolbarBackgroundClass.value,r=[U(r)];else{const d=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,h=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,b=t.list==="no-icons";r=t.options.map(p=>{const S=p.disable?p.disable(e):!1,q=p.type===void 0?e.caret.is(p.cmd,p.param):!1;q&&(n=p.tip,a=p.icon!==null?p.icon:void 0);const T=p.htmlTip;return u(Ke,{active:q,activeClass:d,clickable:!0,disable:S,dense:!0,onClick(B){c(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),ce(B,p,e)}},()=>[b===!0?null:u(Y,{class:q?d:h,side:!0},()=>u(N,{name:p.icon!==null?p.icon:void 0})),u(Y,T?()=>u("div",{class:"text-no-wrap",innerHTML:p.htmlTip}):p.tip?()=>u("div",{class:"text-no-wrap"},p.tip):void 0)])}),s=[e.toolbarBackgroundClass.value,h]}const m=t.highlight&&n!==t.label,y=u(tt,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:m?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:m&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:n,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:a,contentClass:s,onShow:d=>e.emit("dropdownShow",d),onHide:d=>e.emit("dropdownHide",d),onBeforeShow:d=>e.emit("dropdownBeforeShow",d),onBeforeHide:d=>e.emit("dropdownBeforeHide",d)},()=>r);return y}function nt(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(o=>o.cmd==="viewsource")).map(t=>U(t.map(o=>e.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?F(e.slots[o.slot]):o.type==="dropdown"?ot(e,o):de(e,o))))}function lt(e,t,o,n={}){const a=Object.keys(n);if(a.length===0)return{};const s={default_font:{cmd:"fontName",param:e,icon:o,tip:t}};return a.forEach(r=>{const c=n[r];s[r]={cmd:"fontName",param:c,icon:o,tip:c,htmlTip:`<font face="${c}">${c}</font>`}}),s}function it(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let o=e.editLinkUrl.value;const n=()=>{e.caret.restore(),o!==e.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),e.editLinkUrl.value=null};return[u("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),u("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:a=>{oe(a),o=a.target.value},onKeydown:a=>{if(ne(a)!==!0)switch(a.keyCode){case 13:return J(a),n();case 27:J(a),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),U([u(z,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),u(z,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:n})])]}}let H=0;const at={fullscreen:Boolean,noRouteFullscreenExit:Boolean},rt=["update:fullscreen","fullscreen"];function st(){const e=E(),{props:t,emit:o,proxy:n}=e;let a,s,r;const c=_(!1);Le(e)===!0&&O(()=>n.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&d()}),O(()=>t.fullscreen,h=>{c.value!==h&&m()}),O(c,h=>{o("update:fullscreen",h),o("fullscreen",h)});function m(){c.value===!0?d():y()}function y(){c.value!==!0&&(c.value=!0,r=n.$el.parentNode,r.replaceChild(s,n.$el),document.body.appendChild(n.$el),H++,H===1&&document.body.classList.add("q-body--fullscreen-mixin"),a={handler:d},X.add(a))}function d(){c.value===!0&&(a!==void 0&&(X.remove(a),a=void 0),r.replaceChild(n.$el,s),c.value=!1,H=Math.max(0,H-1),H===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return Oe(()=>{s=document.createElement("span")}),Q(()=>{t.fullscreen===!0&&y()}),le(d),Object.assign(n,{toggleFullscreen:m,setFullscreen:y,exitFullscreen:d}),{inFullscreen:c,toggleFullscreen:m}}var pt=A({name:"QEditor",props:{...He,...at,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...rt,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:o,attrs:n}){const{proxy:a,vnode:s}=E(),{$q:r}=a,c=Ae(e,r),{inFullscreen:m,toggleFullscreen:y}=st(),d=Ee(n,s),h=_(null),b=_(null),p=_(null),S=_(!1),q=v(()=>!e.readonly&&!e.disable);let T,B,w=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),T=window.getComputedStyle(document.body).fontFamily;const x=v(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),f=v(()=>{const l=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:l,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!q.value,size:"sm"}}),L=v(()=>{const l=r.lang.editor,i=r.iconSet.editor;return{bold:{cmd:"bold",icon:i.bold,tip:l.bold,key:66},italic:{cmd:"italic",icon:i.italic,tip:l.italic,key:73},strike:{cmd:"strikeThrough",icon:i.strikethrough,tip:l.strikethrough,key:83},underline:{cmd:"underline",icon:i.underline,tip:l.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:i.unorderedList,tip:l.unorderedList},ordered:{cmd:"insertOrderedList",icon:i.orderedList,tip:l.orderedList},subscript:{cmd:"subscript",icon:i.subscript,tip:l.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:i.superscript,tip:l.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:g=>g.caret&&!g.caret.can("link"),icon:i.hyperlink,tip:l.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:i.toggleFullscreen,tip:l.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:i.viewSource,tip:l.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:i.quote,tip:l.quote,key:81},left:{cmd:"justifyLeft",icon:i.left,tip:l.left},center:{cmd:"justifyCenter",icon:i.center,tip:l.center},right:{cmd:"justifyRight",icon:i.right,tip:l.right},justify:{cmd:"justifyFull",icon:i.justify,tip:l.justify},print:{type:"no-state",cmd:"print",icon:i.print,tip:l.print,key:80},outdent:{type:"no-state",disable:g=>g.caret&&!g.caret.can("outdent"),cmd:"outdent",icon:i.outdent,tip:l.outdent},indent:{type:"no-state",disable:g=>g.caret&&!g.caret.can("indent"),cmd:"indent",icon:i.indent,tip:l.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:i.removeFormat,tip:l.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:i.hr,tip:l.hr},undo:{type:"no-state",cmd:"undo",icon:i.undo,tip:l.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:i.redo,tip:l.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:i.heading1||i.heading,tip:l.heading1,htmlTip:`<h1 class="q-ma-none">${l.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:i.heading2||i.heading,tip:l.heading2,htmlTip:`<h2 class="q-ma-none">${l.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:i.heading3||i.heading,tip:l.heading3,htmlTip:`<h3 class="q-ma-none">${l.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:i.heading4||i.heading,tip:l.heading4,htmlTip:`<h4 class="q-ma-none">${l.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:i.heading5||i.heading,tip:l.heading5,htmlTip:`<h5 class="q-ma-none">${l.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:i.heading6||i.heading,tip:l.heading6,htmlTip:`<h6 class="q-ma-none">${l.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:i.heading,tip:l.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:i.code,htmlTip:`<code>${l.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:i.size1||i.size,tip:l.size1,htmlTip:`<font size="1">${l.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:i.size2||i.size,tip:l.size2,htmlTip:`<font size="2">${l.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:i.size3||i.size,tip:l.size3,htmlTip:`<font size="3">${l.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:i.size4||i.size,tip:l.size4,htmlTip:`<font size="4">${l.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:i.size5||i.size,tip:l.size5,htmlTip:`<font size="5">${l.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:i.size6||i.size,tip:l.size6,htmlTip:`<font size="6">${l.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:i.size7||i.size,tip:l.size7,htmlTip:`<font size="7">${l.size7}</font>`}}}),W=v(()=>{const l=e.definitions||{},i=e.definitions||e.fonts?re(!0,{},L.value,l,lt(T,r.lang.editor.defaultFont,r.iconSet.editor.font,e.fonts)):L.value;return e.toolbar.map(g=>g.map(C=>{if(C.options)return{type:"dropdown",icon:C.icon,label:C.label,size:"sm",dense:!0,fixedLabel:C.fixedLabel,fixedIcon:C.fixedIcon,highlight:C.highlight,list:C.list,options:C.options.map(_e=>i[_e])};const P=i[C];return P?P.type==="no-state"||l[C]&&(P.cmd===void 0||L.value[P.cmd]&&L.value[P.cmd].type==="no-state")?P:Object.assign({type:"toggle"},P):{type:"slot",slot:C}}))}),k={$q:r,props:e,slots:t,emit:o,inFullscreen:m,toggleFullscreen:y,runCmd:j,isViewingSource:S,editLinkUrl:p,toolbarBackgroundClass:x,buttonProps:f,contentRef:b,buttons:W,setContent:R};O(()=>e.modelValue,l=>{w!==l&&(w=l,R(l,!0))}),O(p,l=>{o(`link${l?"Show":"Hide"}`)});const ve=v(()=>e.toolbar&&e.toolbar.length!==0),me=v(()=>{const l={},i=g=>{g.key&&(l[g.key]={cmd:g.cmd,param:g.param})};return W.value.forEach(g=>{g.forEach(C=>{C.options?C.options.forEach(i):i(C)})}),l}),pe=v(()=>m.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),be=v(()=>`q-editor q-editor--${S.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(m.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(c.value===!0?" q-editor--dark q-dark":"")),ye=v(()=>[e.contentClass,"q-editor__content",{col:m.value,"overflow-auto":m.value||e.maxHeight}]),we=v(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});function Ce(){if(b.value!==null){const l=`inner${S.value===!0?"Text":"HTML"}`,i=b.value[l];i!==e.modelValue&&(w=i,o("update:modelValue",i))}}function ke(l){if(o("keydown",l),l.ctrlKey!==!0||ne(l)===!0){$();return}const i=l.keyCode,g=me.value[i];if(g!==void 0){const{cmd:C,param:P}=g;Fe(l),j(C,P,!1)}}function Se(l){$(),o("click",l)}function qe(l){if(b.value!==null){const{scrollTop:i,scrollHeight:g}=b.value;B=g-i}k.caret.save(),o("blur",l)}function Be(l){Ne(()=>{b.value!==null&&B!==void 0&&(b.value.scrollTop=b.value.scrollHeight-B)}),o("focus",l)}function xe(l){const i=h.value;if(i!==null&&i.contains(l.target)===!0&&(l.relatedTarget===null||i.contains(l.relatedTarget)!==!0)){const g=`inner${S.value===!0?"Text":"HTML"}`;k.caret.restorePosition(b.value[g].length),$()}}function Te(l){const i=h.value;i!==null&&i.contains(l.target)===!0&&(l.relatedTarget===null||i.contains(l.relatedTarget)!==!0)&&(k.caret.savePosition(),$())}function K(){B=void 0}function G(l){k.caret.save()}function R(l,i){if(b.value!==null){i===!0&&k.caret.savePosition();const g=`inner${S.value===!0?"Text":"HTML"}`;b.value[g]=l,i===!0&&(k.caret.restorePosition(b.value[g].length),$())}}function j(l,i,g=!0){D(),k.caret.restore(),k.caret.apply(l,i,()=>{D(),k.caret.save(),g&&$()})}function $(){setTimeout(()=>{p.value=null,a.$forceUpdate()},1)}function D(){Re(()=>{b.value!==null&&b.value.focus({preventScroll:!0})})}function Pe(){return b.value}return Q(()=>{k.caret=a.caret=new Ye(b.value,k),R(e.modelValue),$(),document.addEventListener("selectionchange",G)}),le(()=>{document.removeEventListener("selectionchange",G)}),Object.assign(a,{runCmd:j,refreshToolbar:$,focus:D,getContentEl:Pe}),()=>{let l;if(ve.value){const i=[u("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+x.value},nt(k))];p.value!==null&&i.push(u("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+x.value},it(k))),l=u("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},i)}return u("div",{ref:h,class:be.value,style:{height:m.value===!0?"100%":null},...we.value,onFocusin:xe,onFocusout:Te},[l,u("div",{ref:b,style:pe.value,class:ye.value,contenteditable:q.value,placeholder:e.placeholder,...d.listeners.value,onInput:Ce,onKeydown:ke,onClick:Se,onBlur:qe,onFocus:Be,onMousedown:K,onTouchstartPassive:K})])}}});const ut=["top","right","bottom","left"],fe={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>ut.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function he(e,t){return{formClass:v(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:v(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:v(()=>{if(e.externalLabel===!0){const o=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(o===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ge={start:"self-end",center:"self-center",end:"self-start"},ct=Object.keys(ge);var bt=A({name:"QFabAction",props:{...fe,icon:{type:String,default:""},anchor:{type:String,validator:e=>ct.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:o}){const n=je(ie,()=>({showing:{value:!0},onChildClick:V})),{formClass:a,labelProps:s}=he(e,n.showing),r=v(()=>{const h=ge[e.anchor];return a.value+(h!==void 0?` ${h}`:"")}),c=v(()=>e.disable===!0||n.showing.value!==!0);function m(h){n.onChildClick(h),o("click",h)}function y(){const h=[];return t.icon!==void 0?h.push(t.icon()):e.icon!==""&&h.push(u(N,{name:e.icon})),(e.label!==""||t.label!==void 0)&&h[s.value.action](u("div",s.value.data,t.label!==void 0?t.label():[e.label])),ae(t.default,h)}const d=E();return Object.assign(d.proxy,{click:m}),()=>u(z,{class:r.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:c.value,onClick:m},y)}});const dt=["up","right","down","left"],ft=["left","center","right"];var yt=A({name:"QFab",props:{...fe,...De,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>dt.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ft.includes(e)}},emits:Ie,setup(e,{slots:t}){const o=_(null),n=_(e.modelValue===!0),a=te(),{proxy:{$q:s}}=E(),{formClass:r,labelProps:c}=he(e,n),m=v(()=>e.persistent!==!0),{hide:y,toggle:d}=Me({showing:n,hideOnRouteChange:m}),h=v(()=>({opened:n.value})),b=v(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${r.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),p=v(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),S=v(()=>{const w={id:a,role:"menu"};return n.value!==!0&&(w["aria-hidden"]="true"),w}),q=v(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function T(w,x){const f=t[w],L=`q-fab__${w} absolute-full`;return f===void 0?u(N,{class:L,name:e[x]||s.iconSet.fab[x]}):u("div",{class:L},f(h.value))}function B(){const w=[];return e.hideIcon!==!0&&w.push(u("div",{class:q.value},[T("icon","icon"),T("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&w[c.value.action](u("div",c.value.data,t.label!==void 0?t.label(h.value):[e.label])),ae(t.tooltip,w)}return Qe(ie,{showing:n,onChildClick(w){y(w),o.value!==null&&o.value.$el.focus()}}),()=>u("div",{class:b.value},[u(z,{ref:o,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a,onClick:d},B),u("div",{class:p.value,...S.value},F(t.default))])}});export{pt as Q,yt as a,bt as b};
