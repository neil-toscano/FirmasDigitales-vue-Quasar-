import{q as Q,w as P,T as O,z as W,a3 as B,a4 as A,C as E,a5 as N,a6 as U,a7 as V,r as m,a8 as j,a9 as C,c,aa as p,a1 as D,ab as I,J,B as v,y as K}from"./index.f603e444.js";import{Q as R}from"./QResizeObserver.fe5a1657.js";const{passive:$}=N,k=["both","horizontal","vertical"];var G=Q({name:"QScrollObserver",props:{axis:{type:String,validator:t=>k.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(t,{emit:T}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,a,u;P(()=>t.scrollTarget,()=>{d(),b()});function s(){n!==null&&n();const h=Math.max(0,U(a)),g=V(a),r={top:h-o.position.top,left:g-o.position.left};if(t.axis==="vertical"&&r.top===0||t.axis==="horizontal"&&r.left===0)return;const w=Math.abs(r.top)>=Math.abs(r.left)?r.top<0?"up":"down":r.left<0?"left":"right";o.position={top:h,left:g},o.directionChanged=o.direction!==w,o.delta=r,o.directionChanged===!0&&(o.direction=w,o.inflectionPoint=o.position),T("scroll",{...o})}function b(){a=A(u,t.scrollTarget),a.addEventListener("scroll",i,$),i(!0)}function d(){a!==void 0&&(a.removeEventListener("scroll",i,$),a=void 0)}function i(h){if(h===!0||t.debounce===0||t.debounce==="0")s();else if(n===null){const[g,r]=t.debounce?[setTimeout(s,t.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];n=()=>{r(g),n=null}}}const{proxy:y}=E();return P(()=>y.$q.lang.rtl,s),O(()=>{u=y.$el.parentNode,b()}),W(()=>{n!==null&&n(),d()}),Object.assign(y,{trigger:i,getPosition:()=>o}),B}}),Z=Q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:T,emit:o}){const{proxy:{$q:n}}=E(),a=m(null),u=m(n.screen.height),s=m(t.container===!0?0:n.screen.width),b=m({position:0,direction:"down",inflectionPoint:0}),d=m(0),i=m(j.value===!0?0:C()),y=c(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),h=c(()=>t.container===!1?{minHeight:n.screen.height+"px"}:null),g=c(()=>i.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${i.value}px`}:null),r=c(()=>i.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${i.value}px`,width:`calc(100% + ${i.value}px)`}:null);function w(e){if(t.container===!0||document.qScrollPrevented!==!0){const l={position:e.position.top,direction:e.direction,directionChanged:e.directionChanged,inflectionPoint:e.inflectionPoint.top,delta:e.delta.top};b.value=l,t.onScroll!==void 0&&o("scroll",l)}}function F(e){const{height:l,width:f}=e;let S=!1;u.value!==l&&(S=!0,u.value=l,t.onScrollHeight!==void 0&&o("scrollHeight",l),L()),s.value!==f&&(S=!0,s.value=f),S===!0&&t.onResize!==void 0&&o("resize",e)}function M({height:e}){d.value!==e&&(d.value=e,L())}function L(){if(t.container===!0){const e=u.value>d.value?C():0;i.value!==e&&(i.value=e)}}let z=null;const q={instances:{},view:c(()=>t.view),isContainer:c(()=>t.container),rootRef:a,height:u,containerHeight:d,scrollbarWidth:i,totalWidth:c(()=>s.value+i.value),rows:c(()=>{const e=t.view.toLowerCase().split(" ");return{top:e[0].split(""),middle:e[1].split(""),bottom:e[2].split("")}}),header:p({size:0,offset:0,space:!1}),right:p({size:300,offset:0,space:!1}),footer:p({size:0,offset:0,space:!1}),left:p({size:300,offset:0,space:!1}),scroll:b,animate(){z!==null?clearTimeout(z):document.body.classList.add("q-body--layout-animate"),z=setTimeout(()=>{z=null,document.body.classList.remove("q-body--layout-animate")},155)},update(e,l,f){q[e][l]=f}};if(D(K,q),C()>0){let f=function(){e=null,l.classList.remove("hide-scrollbar")},S=function(){if(e===null){if(l.scrollHeight>n.screen.height)return;l.classList.add("hide-scrollbar")}else clearTimeout(e);e=setTimeout(f,300)},x=function(H){e!==null&&H==="remove"&&(clearTimeout(e),f()),window[`${H}EventListener`]("resize",S)},e=null;const l=document.body;P(()=>t.container!==!0?"add":"remove",x),t.container!==!0&&x("add"),I(()=>{x("remove")})}return()=>{const e=J(T.default,[v(G,{onScroll:w}),v(R,{onResize:F})]),l=v("div",{class:y.value,style:h.value,ref:t.container===!0?void 0:a,tabindex:-1},e);return t.container===!0?v("div",{class:"q-layout-container overflow-hidden",ref:a},[v(R,{onResize:M}),v("div",{class:"absolute-full",style:g.value},[v("div",{class:"scroll",style:r.value},[l])])]):l}}});export{Z as Q,G as a};
